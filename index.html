<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸŒ¸ Valentine's Day</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Quicksand:wght@400;500;600&family=Great+Vibes&display=swap" rel="stylesheet"/>
  <style>
    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DESIGN TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --bg:        #fff0f5;
      --bg2:       #fce4ec;
      --blush:     #f8bbd0;
      --rose:      #e91e8c;
      --petal:     #f48fb1;
      --soft:      #fce4ec;
      --text:      #5d1a3a;
      --text-light:#b5547a;
      --ribbon:    #ec407a;
      --shadow:    rgba(233,30,140,0.18);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: linear-gradient(160deg, #fff4f8 0%, #fce4ec 45%, #fde8f0 75%, #fff9fb 100%);
      font-family: 'Quicksand', sans-serif;
      color: var(--text);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FLOATING PETALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .petals-bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
    .petal-particle {
      position: absolute;
      bottom: -40px;
      opacity: 0;
      animation: floatPetal linear infinite;
      user-select: none;
      filter: drop-shadow(0 2px 4px rgba(233,30,140,0.15));
    }
    @keyframes floatPetal {
      0%   { transform: translateY(0) rotate(0deg) scale(0.7); opacity: 0; }
      8%   { opacity: 0.85; }
      88%  { opacity: 0.4; }
      100% { transform: translateY(-110vh) rotate(540deg) scale(1.1); opacity: 0; }
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BOKEH ORBS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .bokeh {
      position: fixed; border-radius: 50%;
      pointer-events: none; z-index: 1;
      animation: bokehDrift ease-in-out infinite alternate;
    }
    .b1 { width:360px;height:360px;background:radial-gradient(circle,#f8bbd0 0%,transparent 68%);
          top:-90px;left:-90px;opacity:0.5;animation-duration:13s; }
    .b2 { width:300px;height:300px;background:radial-gradient(circle,#fce4ec 0%,transparent 68%);
          bottom:-70px;right:-70px;opacity:0.55;animation-duration:16s;animation-direction:alternate-reverse; }
    .b3 { width:220px;height:220px;background:radial-gradient(circle,#f9a8c0 0%,transparent 68%);
          top:38%;left:4%;opacity:0.22;animation-duration:19s; }
    @keyframes bokehDrift {
      from { transform: translate(0,0); }
      to   { transform: translate(44px, 44px); }
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .main {
      position: relative; z-index: 10;
      display: flex; flex-direction: column;
      align-items: center; gap: 28px;
      padding: 24px 20px; text-align: center;
    }

    /* TITLE */
    .eyebrow {
      font-family: 'Quicksand', sans-serif; font-weight: 500;
      letter-spacing: 0.45em; font-size: 0.7rem;
      color: var(--text-light); text-transform: uppercase;
      animation: riseIn 1s ease both 0.1s;
    }
    .main-title {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(2.9rem, 8.5vw, 5.2rem);
      color: var(--text);
      line-height: 1.1;
      text-shadow: 0 4px 24px rgba(233,30,140,0.15);
      animation: riseIn 1.1s ease both 0.25s;
    }
    .sub-title {
      font-family: 'Cormorant Garamond', serif;
      font-style: italic; font-size: clamp(1rem,3vw,1.3rem);
      color: var(--text-light);
      letter-spacing: 0.06em;
      animation: riseIn 1.1s ease both 0.45s;
    }
    @keyframes riseIn {
      from { opacity:0; transform:translateY(24px); }
      to   { opacity:1; transform:translateY(0); }
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GIFT BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .box-scene {
      position: relative; width: 172px; height: 198px;
      cursor: pointer;
      animation: bobble 3.2s ease-in-out infinite, riseIn 1.2s ease both 0.65s;
      transition: transform 0.2s;
    }
    .box-scene:hover:not(.opened) { transform: scale(1.07) rotate(-1deg); }
    .box-scene.opened { animation: none; cursor: default; }
    @keyframes bobble {
      0%,100% { transform: translateY(0); }
      50%      { transform: translateY(-12px); }
    }

    /* BASE */
    .box-base {
      position: absolute; bottom:0; left:0;
      width:172px; height:114px;
      background: linear-gradient(150deg, #fadadd 0%, #f8bbd0 50%, #f48fb1 100%);
      border-radius: 6px 6px 14px 14px;
      box-shadow:
        0 18px 44px var(--shadow),
        inset 0 3px 0 rgba(255,255,255,0.7);
    }
    .box-base::before { /* v ribbon */
      content:''; position:absolute;
      left:50%; top:0; transform:translateX(-50%);
      width:22px; height:100%;
      background: linear-gradient(to right,rgba(255,255,255,0.65) 0%,rgba(255,255,255,0.3) 100%);
    }
    .box-base::after { /* h ribbon */
      content:''; position:absolute;
      top:50%; left:0; transform:translateY(-50%);
      width:100%; height:22px;
      background: rgba(255,255,255,0.3);
    }

    /* LID */
    .box-lid {
      position: absolute; bottom:103px; left:-9px;
      width:190px; height:50px;
      background: linear-gradient(150deg, #fce4ec 0%, #f8bbd0 55%, #f48fb1 100%);
      border-radius: 8px;
      box-shadow: 0 -4px 18px rgba(233,30,140,0.18), inset 0 2px 0 rgba(255,255,255,0.8);
      transform-origin: center bottom;
      transition: transform 0.95s cubic-bezier(0.34,1.56,0.64,1), opacity 0.55s ease;
    }
    .box-lid::before {
      content:''; position:absolute;
      left:50%; top:0; transform:translateX(-50%);
      width:22px; height:100%;
      background: rgba(255,255,255,0.5);
    }

    /* BOW */
    .bow {
      position: absolute; bottom:148px; left:50%;
      transform: translateX(-50%);
      width:80px; height:50px;
      display:flex; align-items:center; justify-content:center;
      transition: transform 0.95s cubic-bezier(0.34,1.56,0.64,1), opacity 0.55s ease;
    }
    .bow-l, .bow-r {
      width:33px; height:33px;
      border-radius: 50% 0 50% 0;
      position: absolute;
      background: linear-gradient(135deg, #fff0f5, #fce4ec);
      border: 1.5px solid rgba(244,143,177,0.45);
      box-shadow: 0 4px 14px rgba(233,30,140,0.2);
    }
    .bow-l { left:0;  transform:rotate(-45deg); }
    .bow-r { right:0; transform:rotate(45deg); }
    .bow-c {
      width:19px; height:19px; border-radius:50%;
      background: linear-gradient(135deg, #f8bbd0, #ec407a);
      box-shadow: 0 0 16px rgba(233,30,140,0.55);
      z-index:1; position:relative;
    }

    /* OPEN STATE */
    .box-scene.opened .box-lid {
      transform: rotateX(-155deg) translateY(-20px);
      opacity: 0;
    }
    .box-scene.opened .bow {
      transform: translateX(-50%) translateY(-60px) scale(0.05);
      opacity: 0;
    }

    /* SPARKLES */
    .sp {
      position:absolute; opacity:0;
      pointer-events:none; top:58px; left:78px;
    }
    .sp.pop { animation: spPop 0.9s ease-out forwards; }
    @keyframes spPop {
      0%   { opacity:1; transform:translate(0,0) scale(0); }
      35%  { opacity:1; transform:translate(var(--dx),var(--dy)) scale(1.6); }
      100% { opacity:0; transform:translate(calc(var(--dx)*2.5),calc(var(--dy)*2.5 - 30px)) scale(0.3); }
    }

    /* HINT */
    .hint {
      font-size:0.8rem; letter-spacing:0.18em;
      color: var(--text-light); opacity:0.7;
      animation: pulse 2.2s ease-in-out infinite, riseIn 1.2s ease both 1.1s;
    }
    @keyframes pulse { 0%,100%{opacity:0.4} 50%{opacity:0.9} }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .overlay {
      position:fixed; inset:0; z-index:100;
      background: rgba(252,228,236,0.65);
      backdrop-filter: blur(14px) saturate(1.5);
      display:flex; align-items:center; justify-content:center;
      opacity:0; pointer-events:none;
      transition: opacity 0.45s ease;
    }
    .overlay.show { opacity:1; pointer-events:all; }

    .modal {
      background: linear-gradient(160deg, #fff9fb 0%, #fff0f5 100%);
      border: 1.5px solid rgba(244,143,177,0.4);
      border-radius: 28px;
      padding: 50px 36px 44px;
      max-width: 560px; width:95%;
      text-align:center;
      box-shadow:
        0 28px 70px rgba(233,30,140,0.13),
        0 0 0 7px rgba(248,187,208,0.18),
        inset 0 1px 0 rgba(255,255,255,0.95);
      transform: scale(0.78) translateY(50px);
      transition: transform 0.52s cubic-bezier(0.34,1.56,0.64,1);
      position:relative; overflow:visible;
    }
    .overlay.show .modal { transform: scale(1) translateY(0); }

    /* top stripe */
    .modal::before {
      content:''; position:absolute;
      top:0; left:0; right:0; height:4px;
      background: linear-gradient(90deg, #f8bbd0, #ec407a, #f8bbd0);
      border-radius: 28px 28px 0 0;
    }
    /* floating icon above modal */
    .modal-icon {
      font-size:3rem; display:block;
      position:absolute; top:-28px; left:50%;
      transform:translateX(-50%);
      filter:drop-shadow(0 4px 12px rgba(233,30,140,0.3));
      animation: riseIn 0.6s ease both 0.15s;
    }

    .modal-q {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(1.65rem, 5vw, 2.35rem);
      color: var(--text);
      line-height:1.38; margin: 18px 0 34px;
    }

    /* BUTTONS â€” 3 col grid: row1 hero, row2-3 pairs */
    .answers {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      position: relative;
      min-height: 210px;
    }
    /* NÃºt hero chiáº¿m toÃ n bá»™ hÃ ng 1 */
    .answers .ans.yes {
      grid-column: 1 / -1;
    }
    .ans {
      padding: 12px 10px;
      border-radius: 50px;
      border: none;
      font-family: 'Quicksand', sans-serif;
      font-size: 0.82rem;
      font-weight: 600;
      cursor: pointer;
      letter-spacing: 0.02em;
      line-height: 1.4;
      transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1);
    }
    .ans:hover { transform: scale(1.06) translateY(-2px); }
    .ans:active { transform: scale(0.96); }

    /* YES â€” full-width hero button */
    .ans.yes {
      background: linear-gradient(135deg, #ec407a 0%, #f48fb1 100%);
      color: #fff;
      font-size: 0.95rem;
      padding: 14px 20px;
      box-shadow: 0 8px 26px rgba(233,30,140,0.35);
    }
    .ans.yes:hover { box-shadow: 0 14px 34px rgba(233,30,140,0.52); }

    /* SOFT options */
    .ans.soft {
      background: rgba(248,187,208,0.25);
      color: var(--text);
      border: 1.5px solid rgba(244,143,177,0.5);
    }
    .ans.soft:hover { background: rgba(248,187,208,0.5); }

    /* NO â€” runs away */
    .ans.no {
      background: rgba(248,187,208,0.25);
      color: rgb(255, 0, 102);
      font-size: 0.78rem;
      font-weight: 400;
      border: 1.5px solid rgba(245, 107, 155, 0.35);
      transition: left 0.26s ease, top 0.26s ease, transform 0.3s;
    }

    /* RESULT */
    .result { display:none; flex-direction:column; align-items:center; gap:14px; }
    .result.show { display:flex; }
    .res-emoji { font-size:4rem; animation: bounceIn 0.7s cubic-bezier(0.34,1.56,0.64,1) both; }
    @keyframes bounceIn { from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1} }
    .res-text {
      font-family:'Great Vibes',cursive;
      font-size:clamp(1.45rem,4vw,2.1rem); color:var(--text);
    }
    .res-sub { font-size:0.88rem; color:var(--text-light); }
    .back-btn {
      margin-top:8px; padding:10px 28px;
      background:none; border:1.5px solid rgba(244,143,177,0.5);
      border-radius:50px; color:var(--text-light);
      font-family:'Quicksand',sans-serif; font-size:0.82rem;
      letter-spacing:0.1em; cursor:pointer;
      transition:all 0.3s;
    }
    .back-btn:hover { background:rgba(248,187,208,0.3); transform:scale(1.05); }

    /* CONFETTI */
    .cf { position:fixed; border-radius:3px; opacity:0; z-index:200; animation:cfFall linear forwards; pointer-events:none; }
    @keyframes cfFall {
      0%   { opacity:1; transform:translateY(-10px) rotate(0deg); }
      100% { opacity:0; transform:translateY(105vh) rotate(620deg); }
    }
  </style>
</head>
<body>

<!-- BOKEH BACKGROUND -->
<div class="bokeh b1"></div>
<div class="bokeh b2"></div>
<div class="bokeh b3"></div>

<!-- FLOATING PETALS -->
<div class="petals-bg" id="petalsBg"></div>

<!-- MAIN CONTENT -->
<div class="main">
  <div>
    <div class="eyebrow">14 Â· 02 Â· 2026</div>
    
    <h1 class="main-title">ChÃºc Má»«ng NgÃ y Valentine</h1>
    <p class="sub-title">Happy Valentine's Day &nbsp;ğŸŒ¸</p>
  </div>

  <!-- GIFT BOX -->
  <div class="box-scene" id="boxScene" onclick="openBox()">
    <div class="bow">
      <div class="bow-l"></div>
      <div class="bow-r"></div>
      <div class="bow-c"></div>
    </div>
    <div class="box-lid"></div>
    <div class="box-base"></div>

    <!-- Sparkle nodes (positions set via CSS vars) -->
    <div class="sp" id="s1" style="--dx:-78px;--dy:-88px;font-size:1.1rem">ğŸŒ¸</div>
    <div class="sp" id="s2" style="--dx:78px;--dy:-92px;font-size:1.1rem">âœ¨</div>
    <div class="sp" id="s3" style="--dx:-98px;--dy:-42px;font-size:1.0rem">ğŸ’–</div>
    <div class="sp" id="s4" style="--dx:98px;--dy:-48px;font-size:1.0rem">ğŸŒ·</div>
    <div class="sp" id="s5" style="--dx:-46px;--dy:-118px;font-size:1.0rem">â­</div>
    <div class="sp" id="s6" style="--dx:52px;--dy:-114px;font-size:1.1rem">ğŸŒ¸</div>
    <div class="sp" id="s7" style="--dx:2px;--dy:-132px;font-size:1.2rem">ğŸ’•</div>
  </div>

  <p class="hint" id="hint">âœ¦ &nbsp;Nháº¥n vÃ o há»™p quÃ  Ä‘á»ƒ má»Ÿ&nbsp; âœ¦</p>
</div>

<!-- MODAL OVERLAY -->
<div class="overlay" id="overlay">
  <div class="modal" id="modal">

    <!-- QUESTION SCREEN -->
    <div id="qScreen">
      <span class="modal-icon">ğŸŒ¸</span>

      <!--
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘  ğŸ¨ THAY Äá»”I CÃ‚U Há»I BÃ Máº¬T á» ÄÃ‚Y                  â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      -->
      <div class="modal-q" id="qText">
        Em cÃ³ muá»‘n lÃ  ngÆ°á»i yÃªu cá»§a anh khÃ´ng? ğŸŒ·
      </div>

      <!--
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘  ğŸ¨ THAY Äá»”I CÃC NÃšT TRáº¢ Lá»œI á» ÄÃ‚Y                     â•‘
      â•‘  ans yes  â†’ nÃºt hero full-width hÃ ng 1 (há»“ng Ä‘áº­m)        â•‘
      â•‘  ans soft â†’ nÃºt phá»¥ xáº¿p 3 cá»™t hÃ ng 2-3 (há»“ng pastel)     â•‘
      â•‘  ans no   â†’ nÃºt cháº¡y trá»‘n khi hover ğŸ˜‚                   â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      -->
      <div class="answers" id="ansWrap">
        <!-- HÃ ng 1: hero full-width -->
        <button class="ans yes"  onclick="pick('yes')"> YÃªu ğŸŒ¸</button>
        <!-- HÃ ng 2: 3 nÃºt ngang -->
        <button class="ans soft" onclick="pick('sure')">Báº¡n bÃ¨ ğŸ«‚</button>
        <button class="ans soft" onclick="pick('love')">Máº­p má» ğŸ€</button>
        <button class="ans soft" onclick="pick('maybe')">Suy nghÄ© thÃªm...ğŸ’¬</button>
        <!-- HÃ ng 3: 3 nÃºt ngang (nÃºt cuá»‘i cháº¡y trá»‘n) -->
        <button class="ans soft" onclick="pick('later')">Há»i láº¡i sau nhÃ© ğŸŒ·</button>
        <button class="ans soft" onclick="pick('shy')">Lá»‘p xe tÄƒng ğŸ›</button>
        <button class="ans no" id="noBtn" onmouseover="escape()" onclick="pick('no')">KhÃ´ng lÃ  gÃ¬ ğŸ™…â€â™€ï¸</button>
      </div>
    </div>

    <!-- RESULT SCREEN -->
    <div class="result" id="rScreen">
      <div class="res-emoji" id="rEmoji"></div>
      <div class="res-text"  id="rText"></div>
      <div class="res-sub"   id="rSub"></div>
      <button class="back-btn" onclick="reset()">â†© &nbsp;Xem láº¡i há»™p quÃ </button>
    </div>

  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ¨ CUSTOMIZATION ZONE â€” Chá»‰nh sá»­a tá»± do táº¡i Ä‘Ã¢y!
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// CÃ¢u há»i (cÅ©ng cÃ³ thá»ƒ sá»­a trá»±c tiáº¿p trong HTML bÃªn trÃªn)
const QUESTION = "Em muá»‘n danh pháº­n giá»¯a hai ta lÃ  gÃ¬? ğŸŒ·";

// Káº¿t quáº£ hiá»‡n ra sau khi chá»n
const RESULTS = {
  yes:   {
    emoji: "ğŸ€ğŸ’•ğŸ€",
    text:  "Anh háº¡nh phÃºc quÃ¡!",
    sub:   "ChÃºc em ngÃ y nÃ o cÅ©ng xinh Ä‘áº¹p ğŸŒ¸"
  },
  sure:  {
    emoji: "ğŸ˜­ğŸ«‚ğŸ˜­",
    text:  "Anh biáº¿t ngay mÃ !ğŸ˜­",
    sub:   "ChÃºc em sá»›m cÃ³ Ä‘Æ°á»£c tÃ´i ğŸ’•"
  },
  love:  {
    emoji: "ğŸ€",
    text:  "Anh yÃªu em nhiá»u hÆ¡n!",
    sub:   "MÃ£i mÃ£i bÃªn nhau nhÃ© em ğŸŒ¸"
  },
  maybe: {
    emoji: "ğŸŒ·ğŸ˜ŠğŸŒ·",
    text:  "Anh sáº½ chá» cÃ¢u tráº£ lá»i nhÃ©",
    sub:   "Anh luÃ´n á»Ÿ Ä‘Ã¢y dÃ¹ em quyáº¿t Ä‘á»‹nh tháº¿ nÃ o ğŸ’•"
  },
  later: {
    emoji: "â³ğŸŒ¸â³",
    text:  "Anh sáº½ há»i láº¡i sau nhÃ©~",
    sub:   "DÃ¹ sao Valentine nÃ y cÅ©ng tháº­t vui ğŸŒ·"
  },
  shy:   {
    emoji: "ğŸ™ˆğŸ’—ğŸ™ˆ",
    text:  "Em ngáº¡i thÃ¬ anh chá» thÃ´i~",
    sub:   "Anh tháº¥y em dá»… thÆ°Æ¡ng láº¯m Ä‘Ã³ ğŸŒ¸"
  },
  no:    {
    emoji: "ğŸ¥ºğŸ’”",
    text:  "KhÃ´ng sao, anh hiá»ƒu...",
    sub:   "ChÃºc em Valentine tháº­t vui ğŸŒ¸"
  }
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

let opened = false;
let escapeTimes = 0;

/* â”€â”€ FLOATING PETALS â”€â”€ */
const pbg = document.getElementById('petalsBg');
const PETALS = ['ğŸŒ¸','ğŸ’®','ğŸŒ·','ğŸ’•','ğŸ©·','âœ¿','â€','ğŸ€'];
PETALS.forEach(p => {
  for (let j = 0; j < 3; j++) {
    const el = document.createElement('div');
    el.className = 'petal-particle';
    el.textContent = p;
    el.style.cssText = `
      left: ${Math.random() * 100}%;
      font-size: ${0.75 + Math.random() * 1.1}rem;
      animation-duration: ${9 + Math.random() * 15}s;
      animation-delay: ${Math.random() * 13}s;
    `;
    pbg.appendChild(el);
  }
});

/* â”€â”€ SYNC QUESTION TEXT â”€â”€ */
document.getElementById('qText').textContent = QUESTION;

/* â”€â”€ OPEN BOX â”€â”€ */
function openBox() {
  if (opened) return;
  opened = true;
  document.getElementById('boxScene').classList.add('opened');
  document.getElementById('hint').style.display = 'none';

  // Staggered sparkle burst
  ['s1','s2','s3','s4','s5','s6','s7'].forEach((id, i) => {
    const el = document.getElementById(id);
    el.style.animationDelay = (i * 0.07) + 's';
    el.classList.add('pop');
  });

  setTimeout(() => document.getElementById('overlay').classList.add('show'), 730);
}

/* â”€â”€ PICK ANSWER â”€â”€ */
function pick(choice) {
  const r = RESULTS[choice] || RESULTS.yes;
  document.getElementById('qScreen').style.display = 'none';
  const rs = document.getElementById('rScreen');
  rs.classList.add('show');
  document.getElementById('rEmoji').textContent = r.emoji;
  document.getElementById('rText').textContent  = r.text;
  document.getElementById('rSub').textContent   = r.sub;
  if (choice === 'yes') launchConfetti();
}

/* â”€â”€ NO BUTTON ESCAPES â”€â”€ */
function escape() {
  escapeTimes++;
  // After 6 escapes: surrender and pick yes ğŸ˜‚
  if (escapeTimes > 10) { pick('no'); return; }

  const btn    = document.getElementById('noBtn');
  const wrap   = document.getElementById('ansWrap');
  const maxX   = wrap.clientWidth  - btn.offsetWidth  - 10;
  const maxY   = wrap.clientHeight - btn.offsetHeight - 10;

  btn.style.position = 'absolute';
  btn.style.zIndex   = '5';
  btn.style.left = (Math.random() * Math.max(maxX, 10)) + 'px';
  btn.style.top  = (Math.random() * Math.max(maxY, 10)) + 'px';
}

/* â”€â”€ CONFETTI BURST â”€â”€ */
function launchConfetti() {
  const cols = ['#f8bbd0','#f48fb1','#ec407a','#fce4ec','#ffffff','#fde8f0','#fadadd'];
  for (let i = 0; i < 95; i++) {
    const c  = document.createElement('div');
    c.className = 'cf';
    const w  = 5 + Math.random() * 9;
    const h  = 9 + Math.random() * 15;
    c.style.cssText = `
      left:${8 + Math.random() * 84}%;
      top:-14px;
      width:${w}px; height:${h}px;
      border-radius:${Math.random() > 0.5 ? '50%' : '3px'};
      background:${cols[Math.floor(Math.random() * cols.length)]};
      animation-duration:${1.6 + Math.random() * 2.3}s;
      animation-delay:${Math.random() * 0.9}s;
      transform:rotate(${Math.random() * 360}deg);
    `;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 5000);
  }
}

/* â”€â”€ RESET â”€â”€ */
function reset() {
  document.getElementById('overlay').classList.remove('show');
  document.getElementById('qScreen').style.display = '';
  document.getElementById('rScreen').classList.remove('show');

  // Reset no button
  const nb = document.getElementById('noBtn');
  nb.style.position = nb.style.left = nb.style.top = nb.style.zIndex = '';
  escapeTimes = 0;

  // Reset box
  opened = false;
  document.getElementById('boxScene').classList.remove('opened');
  document.getElementById('hint').style.display = '';
  document.querySelectorAll('.sp').forEach(s => {
    s.classList.remove('pop');
    s.style.animationDelay = '';
  });
}
</script>
</body>
</html>